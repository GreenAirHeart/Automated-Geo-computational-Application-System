<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>D3.js Blue Square Example</title>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <style>
    /* Define styles for different colored squares and curve lines */
    .blue-square {
      fill: blue;
      cursor: pointer;
    }
    .red-square {
      fill: red;
      display: none;
    }
    .green-square {
      fill: green;
      display: none;
    }
    .yellow-square {
      fill: yellow;
      display: none;
    }
    .orange-square {
      fill: orange;
      display: none;
    }
    .grey-curve {
      fill: none;
      stroke: grey;
      stroke-width: 2;
      display: none;
    }
    .pink-curve {
      fill: none;
      stroke: pink;
      stroke-width: 2;
      display: none;
    }
    .black-curve {
      fill: none;
      stroke: black;
      stroke-width: 2;
      display: none;
    }
    .purple-curve {
      fill: none;
      stroke: purple;
      stroke-width: 2;
      display: none;
    }
  </style>
</head>
<body>
  <svg width="400" height="400"></svg>

  <script>
    const svg = d3.select("svg");

    // Create the blue square that will be clicked to show/hide red squares
    const blueSquare = svg.append("rect")
      .attr("class", "blue-square")
      .attr("x", 50)
      .attr("y", 50)
      .attr("width", 50)
      .attr("height", 50)
      .on("click", toggleRedSquares);

    // Arrays to store elements for red, green, yellow, and orange shapes and curves
    const redSquares = [];
    const greenSquares = [];
    const yellowSquares = [];
    const orangeSquares = [];
    const greyCurves = [];
    const pinkCurves = [];
    const blackCurves = [];
    const purpleCurves = [];

    // Loop to create red squares, green squares, curves, and handle click events
    for (let i = 0; i < 2; i++) {
      // Create red squares and grey curves between blue and red squares
      const redSquareTexts = ["Square 1", "Square 2"];

      const redSquare = svg.append("rect")
        .attr("class", "red-square")
        .attr("x", 120)
        .attr("y", 50 + i * 100)
        .attr("width", 50)
        .attr("height", 50)
        .on("click", function() {
          toggleGreenSquares(0);
        });
      redSquares.push(redSquare);

     const redSquareText = svg.append("text")
    .attr("x", 145) // Adjust the x position as needed
    .attr("y", 85 + i * 100) // Adjust the y position as needed
    .text(redSquareTexts[i]) // Use different text for each red square
    .attr("text-anchor", "middle")
    .attr("fill", "white")
    .style("display", "none"); // Initially hide the text

  redSquares[i].on("click", function() {
    // Toggle visibility of red squares
    redSquaresVisible = !redSquaresVisible;

    redSquares.forEach((square, index) => {
      square.style("display", redSquaresVisible ? "block" : "none");
      // Toggle visibility of associated text elements
      redSquareTexts[index].style("display", redSquaresVisible ? "block" : "none");
    });

    // ... (rest of your existing code)
  });


      const greyCurve = svg.append("path")
        .attr("class", "grey-curve")
        .attr("d", `M100,75 Q120,${75 + i * 100} 120,${75 + i * 100}`)
        .style("display", "none");
      greyCurves.push(greyCurve);

      // Create green squares and pink curves between red and green squares
      const greenSquare = svg.append("rect")
        .attr("class", "green-square")
        .attr("x", 190)
        .attr("y", 50 + i * 100)
        .attr("width", 30)
        .attr("height", 30)
        .on("click", function() {
          toggleYellowSquares(i);
        });
      greenSquares.push(greenSquare);

      const pinkCurve = svg.append("path")
        .attr("class", "pink-curve")
        .attr("d", `M170,75 Q170,${75 + i * 100} 190,${75 + i * 100}`)
        .style("display", "none");
      pinkCurves.push(pinkCurve);

      // Create yellow squares, orange squares, purple, and black curves between green and yellow squares
      const yellowSquare1 = svg.append("rect")
        .attr("class", "yellow-square")
        .attr("x", 230)
        .attr("y", 60 + i * 100)
        .attr("width", 20)
        .attr("height", 20)
        .on("click", function() {
          toggleOrangeSquares(i);
        })
        .style("display", "none");

      const yellowSquare2 = svg.append("rect")
        .attr("class", "yellow-square")
        .attr("x", 230)
        .attr("y", 90 + i * 100)
        .attr("width", 20)
        .attr("height", 20)
        .on("click", function() {
          toggleOrangeSquares(i);
        })
        .style("display", "none");
      yellowSquares.push([yellowSquare1, yellowSquare2]);

      const purpleCurve = svg.append("path")
        .attr("class", "purple-curve")
        .attr("d", `M220,70 Q240,${70 + i * 100} 220,${70 + i * 100}`)
        .style("display", "none");
      purpleCurves.push(purpleCurve);

      const blackCurve1 = svg.append("path")
        .attr("class", "black-curve")
        .attr("d", `M215,70 Q225,${70 + i * 100} 235,${70 + i * 100}`)
        .style("display", "none");

      // const blackCurve2 = svg.append("path")
      //   .attr("class", "black-curve")
      //   .attr("d", `M215,90 Q225,${90 + i * 100} 235,${90 + i * 100}`)
      //   .style("display", "none");
      blackCurves.push([blackCurve1,]);

      const orangeSquare1 = svg.append("rect")
        .attr("class", "orange-square")
        .attr("x", 270)
        .attr("y", 65 + i * 100)
        .attr("width", 15)
        .attr("height", 15)
        .style("display", "none");

      const orangeSquare2 = svg.append("rect")
        .attr("class", "orange-square")
        .attr("x", 270)
        .attr("y", 90 + i * 100)
        .attr("width", 15)
        .attr("height", 15)
        .style("display", "none");
      orangeSquares.push([orangeSquare1, orangeSquare2]);
    }



    let redSquaresVisible = false;

    // Function to toggle visibility of red squares and associated grey curves
    function toggleRedSquares() {
      // Toggle visibility of red squares and grey curves
      redSquaresVisible = !redSquaresVisible;

      redSquares.forEach((square, index) => {
        square.style("display", redSquaresVisible ? "block" : "none");
      });

      greyCurves.forEach(curve => {
        curve.style("display", redSquaresVisible ? "block" : "none");
      });

      if (!redSquaresVisible) {
        greenSquares.forEach(square => square.style("display", "none"));
        yellowSquares.forEach(squares => squares.forEach(square => square.style("display", "none")));
        orangeSquares.forEach(squares => squares.forEach(square => square.style("display", "none")));
        pinkCurves.forEach(curve => curve.style("display", "none"));
        blackCurves.forEach(curve => curve.forEach(line => line.style("display", "none")) );
        purpleCurves.forEach(curve => curve.style("display", "none"));
      }
    }

    // Function to toggle visibility of green squares and associated pink curves
    function toggleGreenSquares(index) {
      // Toggle visibility of green squares and pink curves
      const greenSquareToShow = greenSquares[index];
      const pinkCurveToShow = pinkCurves[index];

      if (greenSquareToShow && pinkCurveToShow) {
        const displayStyle = greenSquareToShow.style("display");

        greenSquareToShow.style("display", displayStyle === "none" ? "block" : "none");
        pinkCurveToShow.style("display", displayStyle === "none" ? "block" : "none");
      }
    }

    // Function to toggle visibility of yellow squares and associated purple curves
    function toggleYellowSquares(index) {
      // Toggle visibility of yellow squares and purple curves
      const yellowSquaresToShow = yellowSquares[index];
      const purpleCurveToShow = purpleCurves[index];

      if (yellowSquaresToShow && purpleCurveToShow) {
        const displayStyle = yellowSquaresToShow[0].style("display");

        yellowSquaresToShow.forEach(square => {
          square.style("display", displayStyle === "none" ? "block" : "none");
        });

        purpleCurveToShow.style("display", displayStyle === "none" ? "block" : "none");
      }
    }

    // Function to toggle visibility of orange squares and associated black curves
    function toggleOrangeSquares(index) {
      // Toggle visibility of orange squares and black curves
      const orangeSquaresToShow = orangeSquares[index];
      const blackCurvesToShow = blackCurves[index];

      if (orangeSquaresToShow && blackCurvesToShow) {
        const displayStyle = orangeSquaresToShow[0].style("display");

        orangeSquaresToShow.forEach(square => {
          square.style("display", displayStyle === "none" ? "block" : "none");
        });

        blackCurvesToShow.forEach(line => {
          line.style("display", displayStyle === "none" ? "block" : "none");
        });
      }
    }

  </script>
</body>
</html>
